<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S & M Cloths</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-3.7.0.min.js"></script>
</head>
<body>

    <div class="container">
        <ul class="menu-top">
            <li>
                <a href="#">Home</a>
            </li>
            <li>
                <a href="#">Settings</a>
            </li>
        </ul>
        <hr>
        <input type="text" id="mobile" name="" placeholder="Mobile#" style="border: none; background-color: unset; width: 100%">
        <hr>
        <br>
        <input type="text" id="qty" name="" placeholder="Quantity" class="input">
        <select class="input" id="item_name">
        </select>
        <select class="input" id="item_cat">
            <option value="Dry">Just Dry</option>
            <option value="Washed">Just Washed</option>
            <option value="Press">Just Press</option>
        </select>
        <button class="button" id="addItem_toSell">Add Item</button>
        <datalist id="css">
            <option value="1">1</option>
        </datalist>
        <hr style="margin-top: 5px">
        <br>
        <table class="invoice" id="init_invoice">
            <thead>
                <tr>
                    <th>Qty</th>
                    <th>Item</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th>Category</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
           <!--     <tr>
                    <td><input type="text" value="2" name="" id="qtty1"></td>
                    <td><input type="text" value="Shirt" name="" id="" disabled></td>
                    <td><input type="text" value="10" name="" id="ittp1" disabled></td>
                    <td><input type="text" value="" name="" id="itmp1" disabled></td>
                    <td><input type="text" value="Dry Clean" name="" id="" disabled></td>
                    <td><button class="del">x</button></td>
                </tr>

                <tr>
                    <td><input type="text" value="2" name="" id="qtty2"></td>
                    <td><input type="text" value="Shirt" name="" id="" disabled></td>
                    <td><input type="text" value="10" name="" id="ittp2" disabled></td>
                    <td><input type="text" value="" name="" id="itmp2" disabled></td>
                    <td><input type="text" value="Dry Clean" name="" id="" disabled></td>
                    <td><button class="del">x</button></td>
                </tr>-->
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="3"></th>
                    <th>Amount:-</th>
                    <th id="grd_tot">0</th>
                </tr>
                <tr>
                    <th colspan="3"></th>
                    <th>VAT 5%:-</th>
                    <th id="vat">2</th>
                </tr>
                <tr>
                    <th colspan="3"></th>
                    <th>Total:-</th>
                    <th id="tot">42</th>
                </tr>
                <tr>
                    <td colspan="4"></td>
                    <td>
                        <button id="print" onclick="printContent('invoice');" class="button">Print Invoice</button>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>


    <div class="container" style="">
            <div class="invoice" id="invoice">
                <div class="center-al">
                    <div class="branding">
                        <h1>S&L</h1>
                    <b>Space Loundry</b>
                    </div>
                    <hr style="margin:5px">
                    <b class="tag">Loundry Service Downtown</b>
                </div>
                <div class="row">
                    <h4>Mobile: <p>03066904747</p></h4>
                    <h4>Dated: <p>15/02/2023 20:08:00pm</p></h4>
                    <h4>Status: <p>Delivered</p></h4>
                    <h4>#45</h4>
                </div>

                <table class="print_tab">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Price</th>
                            <th>Qty</th>
                            <th>Total</th>
                            <th>Category</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Shirt</td>
                            <td>10</td>
                            <td>2</td>
                            <td>20</td>
                            <td>Dry Clean</td>
                        </tr>

                        <tr>
                            <td>Shirt</td>
                            <td>10</td>
                            <td>2</td>
                            <td>20</td>
                            <td>Dry Clean</td>
                       </tr> 
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="3"></th>
                            <th>Amount:-</th>
                            <th>40</th>
                        </tr>
                        <tr>
                            <th colspan="3"></th>
                            <th>VAT 5%:-</th>
                            <th>2</th>
                        </tr>
                        <tr>
                            <th colspan="5" style="height: 20px"></th>
                        </tr>
                        <tr><th colspan="3"></th>
                            <th style="font-size: 25px">Total:-</th>
                            <th style="font-size: 25px">42</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    
    <script src="js/product.js"></script>
    <script>
        // Add Item
            var clickCounter = 0;
            var arrayData = new Array();
            $("#addItem_toSell").click((e)=>{
                e.preventDefault();
                if(!parseInt($("#qty").val()) || parseInt($("#qty").val()) == ""){

                    alert("Please enter quantity!");

                }else{

                    clickCounter += 1;
                    var html_tr = '<tr>';
                    var html_td  = '<td>';
                    var html_td2  = '</td>';
                    var html_tr2  = '</tr>';

                    itemQty = $("#qty").val();
                    itemName = $("#item_name").val();

                    

                    var itemCat = $("#item_cat").val();

                    var itemVal = getProductD(itemName);

                    if(itemVal[0] != ""){
                        
                        if (itemCat == "Dry") {

                            itemPrice = itemVal[1];

                        }else if(itemCat == "Washed"){

                            itemPrice = itemVal[2];

                        }else if(itemCat == "Press"){

                            itemPrice = itemVal[3];

                        }else{
                            itemPrice = 1; //Defualt Price
                        }


                    }else {
                        alert("You must select service type");
                    }

                    var qty = '<input type="text" value="' + itemQty + '" name="" id="qtty'+ clickCounter +'">';
                    var item = '<input type="text" value="' + itemName + '" name="" id="" disabled>';
                    var item_p = '<input type="text" value="' + itemPrice + '" name="" id="itmp'+clickCounter+'" disabled>';
                    var item_t = '<input type="text" value="'+ itemQty * itemPrice + '" name="" id="tot'+clickCounter+'" disabled>';
                    var item_type = '<input type="text" value="' + itemCat + '" name="" id="" disabled>';
                    var item_rem = '<button class="del" onclick="remData(this);" id="' + clickCounter +'">x</button></td>';
                    
                    var data1 = new Array(itemQty,itemName,itemPrice,itemQty * itemPrice,itemCat);
                    arrayData.push(data1);



                    $("#init_invoice tbody").append(html_tr + html_td + qty + html_td2 + html_td + item + html_td2 + html_td + item_p + html_td2 + html_td + item_t + html_td2 + html_td + item_type + html_td2 + html_td + item_rem + html_td2 + html_tr2);
                   
                    grandTotal();

                }
                
            });

            // Remove Array
            function remData(sel){
                $(sel).parents("tr").remove();
                clickCounter -= 1;
                // console.log(arrayData[$(sel).attr("id")-1]);
                arrayData.pop($(sel).attr("id")-1);
                grandTotal();
            }

            // Print Data
            function printContent(el){
                var restorepage = $('body').html();
                var printcontent = $('#' + el).clone();
                $('body').empty().html(printcontent);
                window.print();
                $('body').html(restorepage);
            }

            multiCols();
            // This will multply and show results
            function multiCols(){
                var rows = $("#init_invoice tbody tr");
                // rowsnum = rows.legnth;
                for (var i =  0; i <= rows.length -1; i++) {
                    $("#itmp" + i).val($("#qtty" + i).val() * $("#ittp" + i).val());
                    // console.log($("#qtty" + i).val() * $("#ittp" + i).val());
                }
            }


            // Total
            function grandTotal(){
                 grand = 0;
                 
                for (var i =  0; i <= arrayData.length-1; ++i) {
                    vl = arrayData[i][3];
                    grand += parseInt(vl);
                } 
                // alert(grand);
                $("#grd_tot").html(grand);
                // 5%
                var vat = (5 / 100) * grand;
                $("#vat").html(vat);
                $("#tot").html(grand + vat);
            }        
    </script>

</body>
</html>
